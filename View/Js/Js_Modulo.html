<script>
  // ===============================
  // REGISTRO GENÉRICO DE MÓDULOS
  // ===============================

  function registrarModulo(nombreModulo, funciones) {
    if (!nombreModulo || typeof funciones !== "object") return;
    // namespace principal: window[nombreModulo]
    window[nombreModulo] = window[nombreModulo] || {};

    Object.entries(funciones).forEach(([clave, fn]) => {
      if (typeof fn === "function") {
        // 1) registro namespaced: window.Comida.abrirModalAgregar()
        window[nombreModulo][clave] = fn;
        // 2) registro legacy: window.abrirModalAgregarComida (compatibilidad)
        window[`${clave}${nombreModulo}`] = fn;
      } else {
        console.warn(
          `registrarModulo: la clave ${clave} para ${nombreModulo} no es función`
        );
      }
    });
  }

  // ===============================
  // MODULO: COMIDA
  // ===============================
  registrarModulo("Comida", {
    abrirModalAgregar: abrirModalAgregarComida,
    cerrarModalAgregar,
    abrirModalRetiro: abrirModalRetiroComida,
    cerrarModalRetiro,
    abrirModalEditar: abrirModalEditarComida,
    cerrarModalEditar,
    abrirModalComentario: abrirModalComentarioComida,
    cerrarModalComentario,
    abrirModalVencimiento: abrirModalVencimientoComida,
    cerrarModalVencimiento,
    loadNotificaciones,
    limpiarNotificaciones,
    mostrarTab,
    confirmarEliminar: confirmarEliminarComida,
    changePage,
    deactivateSelectedNotifications,
    handleIndividualCheckboxChange,
    aplicarFiltrosYOrdenar: aplicarFiltrosYOrdenarComida,
    limpiarTodosLosFiltros: limpiarTodosLosFiltrosComida,
    ordenarPorFecha: ordenarPorFechaComida,
    ordenarAscendente: ordenarAscendenteComida,
    ordenarDescendente: ordenarDescendenteComida,
    toggleFiltrosAdicionales: toggleFiltrosAdicionalesComida,
  });

  // ===============================
  // MODULO: PAPELERIA
  // ===============================
  registrarModulo("Papeleria", {
    abrirModalAgregar: abrirModalAgregarPapeleria,
    cerrarModalAgregar: cerrarModalAgregarPapeleria,
    abrirModalRetiro: abrirModalRetiroPapeleria,
    cerrarModalRetiro: cerrarModalRetiroPapeleria,
    abrirModalEditar: abrirModalEditarPapeleria,
    cerrarModalEditar: cerrarModalEditarPapeleria,
    abrirModalComentario: abrirModalComentarioPapeleria,
    cerrarModalComentario: cerrarModalComentarioPapeleria,
    abrirImagenNuevaVentana: abrirImagenNuevaVentanaPapeleria,
    confirmarEliminar: confirmarEliminarPapeleria,
    limpiarTodosLosFiltros: limpiarTodosLosFiltrosPapeleria,
    aplicarFiltrosYOrdenar: aplicarFiltrosYOrdenarPapeleria,
  });
  // ===============================
  // MODULO: DECORACION
  // ===============================

  registrarModulo("Decoracion", {
    abrirModalAgregar: abrirModalAgregarDecoracion,
    cerrarModalAgregar: cerrarModalAgregarDecoracion,
    abrirModalRetiro: abrirModalRetiroDecoracion,
    cerrarModalRetiro: cerrarModalRetiroDecoracion,
    abrirModalEditar: abrirModalEditarDecoracion,
    cerrarModalEditar: cerrarModalEditarDecoracion,
    abrirModalComentario: abrirModalComentarioDecoracion,
    cerrarModalComentario: cerrarModalComentarioDecoracion,
    abrirImagenNuevaVentana: abrirImagenNuevaVentanaDecoracion,
    confirmarEliminar: confirmarEliminarDecoracion,
    limpiarTodosLosFiltros: limpiarTodosLosFiltrosDecoracion,
    aplicarFiltrosYOrdenar: aplicarFiltrosYOrdenarDecoracion,
  });
</script>
