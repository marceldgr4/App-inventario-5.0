<?!= include("View/Css/Css_Generico.html"); ?>
<?!= include("View/Css/Css_Articulos.html"); ?>
<?!= include("View/Css/Css_Tablas.html"); ?>
<?!= include("View/Css/Css_Filtros.html"); ?>
<?!= include("View/Css/Css_Comida.html"); ?>
<?!= include("View/Css/Css_Notifications.html"); ?>
<?!= include("View/Css/Css_Modal.html"); ?>
<?!= include("View/Css/Css_Comentarios.html"); ?>

<div class="content">
  <button id="toggleSidebarBtn">
    <ion-icon name="menu-outline"></ion-icon>
  </button>

  <h2>Usuarios</h2>
  <button class="btn-agregar btn-primary" onclick="abrirModalAgregarUsuario()">
    <ion-icon name="person-add-outline"></ion-icon> + Agregar Usuario
  </button>

  <!-- ============================
       Barra búsqueda y orden
  ============================= -->
  <div class="search-sort-container">
    <input type="text" id="buscarUsuario" onkeyup="buscarPorNombreUsuario()" placeholder="Buscar Usuario..." class="search-input">
    
    <div id="sortContainer">
      <i class="fas fa-sort sort-menu-icon" onclick="ordenarPorFechaUsuario(event)" title="Ordenar por Fecha"></i>
      <div id="sortOptions" class="sort-options">
        <a href="#" onclick="ordenarAscendenteUsuario(); return false;">Ascendente (Fecha)</a>
        <a href="#" onclick="ordenarDescendenteUsuario(); return false;">Descendente (Fecha)</a>
      </div>
    </div>
  </div>

  <!-- ============================
       Modal Agregar Usuario
  ============================= -->
  <div id="modalAgregarUsuario" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Agregar Usuario</h3>
        <span class="close" onclick="cerrarModalAgregarUsuario()">&times;</span>
      </div>
      <div id="agregarUsuarioMessage" class="modal-message"></div> 
      <form id="agregarUsuarioForm">
        
        <label for="nombreCompletoAgregarUsuario">Nombre Completo *:</label>
        <input type="text" id="nombreCompletoAgregarUsuario" required>

        <label for="userNameAgregarUsuario">Nombre de Usuario *:</label>
        <input type="text" id="userNameAgregarUsuario" required>

        <label for="passwordAgregarUsuario">Contraseña *:</label>
        <input type="password" id="passwordAgregarUsuario" required>

        <label for="cdeAgregarUsuario">CDE *:</label>
        <input type="text" id="cdeAgregarUsuario" required>

        <label for="emailAgregarUsuario">Email *:</label>
        <input type="email" id="emailAgregarUsuario" required>

        <label for="estadoAgregarUsuario">Estado Usuario *:</label>
        <select id="estadoAgregarUsuario" required>
          <option value="Activo">Activo</option>
          <option value="Inactivo">Inactivo</option>
        </select>

        <label for="rolAgregarUsuario">Rol *:</label>
        <select id="rolAgregarUsuario" required>
          <option value="Administrador">Administrador</option>
          <option value="Usuario">Usuario</option>
        </select>
        
        <button type="submit" class="submit-btn btn-primary">
          <ion-icon name="person-add-outline"></ion-icon> Agregar Usuario
        </button>
      </form>
    </div>
  </div>

  <!-- ============================
       Modal Editar Usuario
  ============================= -->
  <div id="modalEditarUsuario" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Editar Usuario (ID: <span id="usuarioIdEditarUsuario"></span>)</h3>
        <span class="close" onclick="cerrarModalEditarUsuario()">&times;</span>
      </div>
      <form id="editarUsuarioForm">

        <label for="nombreCompletoEditarUsuario">Nombre Completo *:</label>
        <input type="text" id="nombreCompletoEditarUsuario" required>

        <label for="userNameEditarUsuario">Nombre de Usuario *:</label>
        <input type="text" id="userNameEditarUsuario" required>

        <label for="passwordEditarUsuario">Contraseña (Dejar vacío para no cambiar):</label>
        <input type="password" id="passwordEditarUsuario" placeholder="******">
        
        <label for="cdeEditarUsuario">CDE *:</label>
        <input type="text" id="cdeEditarUsuario" required>

        <label for="emailEditarUsuario">Email *:</label>
        <input type="email" id="emailEditarUsuario" required>

        <label for="estadoEditarUsuario">Estado Usuario *:</label>
        <select id="estadoEditarUsuario" required>
          <option value="Activo">Activo</option>
          <option value="Inactivo">Inactivo</option>
        </select>

        <label for="rolEditarUsuario">Rol *:</label>
        <select id="rolEditarUsuario" required>
          <option value="Administrador">Administrador</option>
          <option value="Usuario">Usuario</option>
        </select>

        <button type="submit" class="submit-btn btn-secondary">
          <ion-icon name="cloud-upload-outline"></ion-icon> Guardar Cambios
        </button>
      </form>
    </div>
  </div>

  

  <!-- ============================
       Tabla
  ============================= -->
  <table id="UsuarioTable" class="data-table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Nombre Completo</th>
        <th>Usuario</th>
        <th>Contraseña</th>
        <th>CDE</th>
        <th>Email</th>
        <th>Estado Usuario</th>
        <th>Rol</th>
        <th>Fecha Registro</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody id="tablaUsuarioBody"></tbody>
  </table>

  <!-- ============================
       Paginación + Mensajes
  ============================= -->
  <div id="usuarioPagination" class="pagination-controls"></div>

  <div id="mensajeConfirmacionUsuario" class="mensaje-confirmacion" style="display:none;">
    <span></span>
    <button onclick="cerrarMensajeUsuario()">&times;</button>
  </div>
</div>
<?!= include('View/Js/Js_Generico.html'); ?>
<?!= include('View/Js/Js_Usuario.html'); ?>


