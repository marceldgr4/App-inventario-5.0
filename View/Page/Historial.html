<style>
  .historial-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .historial-card {
    background-color: #fff;
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 1rem;
    display: grid;
    grid-template-columns: auto 1fr;
    gap: 1rem;
    align-items: center;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    transition: box-shadow 0.3s ease;
  }

  .historial-card:hover {
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  }

  .historial-icon {
    font-size: 2rem;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    color: #fff;
  }

  .historial-icon.agregado { background-color: var(--success-color); }
  .historial-icon.modificado { background-color: var(--warning-color); }
  .historial-icon.retirado { background-color: var(--danger-color); }
  .historial-icon.eliminado { background-color: #343a40; }

  .historial-details {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 0.5rem 1rem;
  }

  .historial-details p {
    margin: 0;
    font-size: 0.9rem;
  }

  .historial-details strong {
    font-weight: 500;
    color: #333;
  }

  .historial-header {
    grid-column: 1 / -1;
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid #eee;
  }

  .historial-header h3 {
    margin: 0;
    font-size: 1.1rem;
  }

  .historial-header .estado {
    font-weight: 600;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    color: #fff;
    font-size: 0.8rem;
  }
  
  .estado.agregado { background-color: var(--success-color); }
  .estado.modificado { background-color: var(--warning-color); }
  .estado.retirado { background-color: var(--danger-color); }
  .estado.eliminado { background-color: #343a40; }

  .tabs {
    display: flex;
    gap: 0.5rem;
    border-bottom: 2px solid #eee;
    margin-bottom: 1rem;
  }

  .tab-link {
    padding: 0.75rem 1.25rem;
    cursor: pointer;
    border: none;
    background-color: transparent;
    font-size: 1rem;
    font-weight: 500;
    color: #555;
    border-bottom: 2px solid transparent;
    transition: all 0.3s ease;
  }

  .tab-link.active {
    color: var(--primary-color);
    border-bottom-color: var(--primary-color);
  }

  .tab-content {
    display: none;
  }

  .tab-content.active {
    display: block;
  }

</style>

<h2>Historial de Modificaciones</h2>

<div class="tabs">
  <button class="tab-link active" data-category="Todos" onclick="filtrarHistorialPorCategoria('Todos')">Todos</button>
  <button class="tab-link" data-category="Inventario" onclick="filtrarHistorialPorCategoria('Inventario')">Artículos</button>
  <button class="tab-link" data-category="Comida" onclick="filtrarHistorialPorCategoria('Comida')">Comida</button>
  <button class="tab-link" data-category="Decoracion" onclick="filtrarHistorialPorCategoria('Decoracion')">Decoración</button>
  <button class="tab-link" data-category="Papeleria" onclick="filtrarHistorialPorCategoria('Papeleria')">Papelería</button>
</div>

<div class="action-bar">
  <input type="text" 
         id="buscarHistorial" 
         class="search-input" 
         onkeyup="buscarPorNombreHistorial()" 
         placeholder="Buscar por producto o usuario..."
         aria-label="Buscar en historial">
         
  <div id="toggleFiltrosHistorialIconContainer" 
       class="filter-toggle" 
       title="Mostrar/Ocultar filtros adicionales"
       role="button"
       tabindex="0">
    <ion-icon name="filter-outline" class="icon-md"></ion-icon>
    <span>Filtros</span>
  </div>
</div>

<div id="filtrosAdicionalesHistorialContainer" class="filtros-adicionales-ocultos">
  <div class="filter-group">
    <select id="filtroEstadoHistorial" class="form-control" onchange="filtrarHistorialPorEstado()" aria-label="Filtrar por estado">
      <option value="">Todos los Estados</option>
      <option value="agregado">Agregado</option>
      <option value="modificado">Modificado</option>
      <option value="retirado">Retirado</option>
      <option value="eliminado">Eliminado</option>
    </select>
           
    <button onclick="limpiarTodosLosFiltrosHistorial()" 
            class="btn btn-outline"
            aria-label="Limpiar todos los filtros">
      Limpiar Filtros
    </button>
  </div>
</div>

<div class="table-actions">
  <div id="sortContainer" class="sort-container">
    <button class="btn btn-icon" 
            onclick="ordenarPorFechaHistorial(event)"
            aria-label="Ordenar por fecha">
      <i class="fas fa-sort"></i>
    </button>
    <div id="sortOptions" class="sort-options" role="menu">
      <a href="#" 
         onclick="ordenarAscendenteHistorial(); return false;" 
         role="menuitem">Ascendente</a>
      <a href="#" 
         onclick="ordenarDescendenteHistorial(); return false;" 
         role="menuitem">Descendente</a>
    </div>
  </div>
</div>

<div id="historial-list-container" class="historial-list">
  <!-- Las tarjetas de historial se insertarán aquí dinámicamente -->
</div>

<div id="historialPagination" class="pagination" role="navigation" aria-label="Paginación de historial"></div>

<div id="mensajeConfirmacionHistorial" class="mensaje-confirmacion" style="display:none;">
  <span role="alert"></span>
  <button class="btn btn-primary" 
          onclick="cerrarMensajeHistorial()"
          aria-label="Cerrar mensaje">
    Cerrar
  </button>
</div>

<div id="loadingOverlayHistorial" class="loading-overlay" style="display:none;">
  <div class="spinner"></div>
</div>

<?!= include('View/Css/Css_Generico.html'); ?>
<?!= include('View/Css/Css_Tablas.html'); ?>
<?!= include('View/Css/Css_Filtros.html'); ?>
<?!= include('View/Css/Css_Modal.html'); ?>
<?!= include('View/Css/Css_Notifications.html'); ?>
<?!= include('View/Css/Css_Comentarios.html'); ?>
<?!= include('View/Css/Css_Comida.html'); ?>  
<?!= include('View/Js/Js_Generico.html'); ?>
<?!= include('View/Js/Js_Historial.html'); ?>
